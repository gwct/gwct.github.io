
<!doctype html>
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-98263199-3"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
    
            gtag('config', 'UA-98263199-3');
        </script>
    
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">	
        <link rel='shortcut icon' href='img/favicon.ico' type='image/x-icon'/ >
        <link type="text/css" rel="stylesheet" href="css/pure.css"  media="screen,projection" />
        <link type="text/css" rel="stylesheet" href="css/global.css"  media="screen,projection" />
        <link type="text/css" rel="stylesheet" href="css/servers.css"  media="screen,projection" />
        <link href="https://fonts.googleapis.com/css?family=Lato:300" rel="stylesheet"> 
        <title>Good lab - Servers</title>
    </head>

<body>


    <div class="pure-g" id="main_div_links">
	<div class="pure-u-24-24" id="header">Good lab computational resources</div>
	<div class="pure-g" id="desktop_nav">
		<div class="pure-u-5-24" id="margin"></div>
			<div class="pure-u-2-24" id="nav_link_cell"><a class="nav_link" href="servers.html#musculus">Musculus</a></div>
			<div class="pure-u-2-24" id="nav_link_cell"><a class="nav_link" href="servers.html#lepus">Lepus</a></div>
			<div class="pure-u-2-24" id="nav_link_cell"><a class="nav_link" href="servers.html#rattus">Rattus</a></div>
			<div class="pure-u-3-24" id="nav_link_cell"><a class="nav_link" href="servers.html#carnation">Carnation</a></div>
			<div class="pure-u-3-24" id="nav_link_cell"><a class="nav_link" href="servers.html#reincarnation">Reincarnation</a></div>
			<div class="pure-u-2-24" id="nav_link_cell"><a class="nav_link" href="servers.html#griz">Griz</a></div>
		<div class="pure-u-4-24" id="margin"></div>
	</div>

	<div class="pure-g" id="mobile_nav">
		<div class="pure-u-24-24 dropdown" id="nav_link_cell">
			<a href="#" class="nav_link"><img class="pure_img" id="mobile_logo_nav" src="img/me/logo-nav1.png"></a>
			<div class="dropdown_container mobile_drop">
				<ul class="pure-menu-list">
					<li><a href="index.html" id="mobile_nav_link">Bio</a></li>
					<li><a href="research.html" id="mobile_nav_link">Research</a></li>
					<li><a href="pubs.html" id="mobile_nav_link">Publications</a></li>
					<li><a href="Gregg-Thomas-CV.pdf" id="mobile_nav_link" target="_blank">CV</a></li>
					<li><a href="links.html" id="mobile_nav_link">Software & Links</a></li>
					<li><a href="archive.html" id="mobile_nav_link">Updates</a></li>
				</ul>
			</div>
		</div>
	</div>


		<div class="pure-u-24-24" id="server_sep_div"></div>
		<div class="pure-u-2-24" id="margin"></div>
		<div class="pure-u-20-24" id="link_text">
			<!-- <div class="pure-g" id="line_cont"><div class="pure-u-24-24" id="line"></div></div> -->
			<!-- <div class="section_header_cont"><div class="section_header">My Software</div></div> -->
			<a name="musculus"></a>	
			<div class="pure-g">
					<div class="pure-u-2-24" id="margin"></div>
					<div class="pure-u-20-24" id="server_row">
						<div id="server_img_cont">
							<h1>Musculus</h1>
							<img class="pure-img" id="server_img" src="img/logo/musculus.png">
						</div>
						<div id="server_desc">
							<h1>musculus.dbs.umt.edu:22</h1>

							<table id="sum-tab">
								<tr><td class="td-label">Access: </td><td>Good lab</td></tr>
								<tr><td class="td-label">Operating System: </td><td>Linux version 4.4.0-135-generic</td></tr>
								<tr><td class="td-label">Processor: </td><td>Intel Xeon Processor E5-2650 @ 2GHz (8 cores, 16 threads)</td></tr>
								<tr><td class="td-label">Memory: </td><td>200GB</td></tr>
								<tr><td class="td-label">Storage:</td><td>One 40TB HDD containing one partition and several logical volumes</td></tr>
							</table>

							<center>
							<table id="vol-tab">
								<thead><th>Volume name</th><th>Path</th><th>Capactity</th></thead>
								<tr><td><em>home</em></td><td>/home</td><td>3TB</td></tr>
								<tr><td><em>data</em></td><td>/data</td><td>15TB</td></tr>
								<tr><td><em>scratch</em></td><td>/scratch/1</td><td>10TB</td></tr>
								<tr><td><em>morescratch</em></td><td>/scratch/2</td><td>2TB</td></tr>
							</table>
							</center>
						</div>
					</div>
					<div class="pure-u-2-24" id="margin"></div>
				</div>

				<div class="pure-u-24-24" id="server_sep_div"></div>
				<div class="pure-u-2-24" id="margin"></div>
				<div class="pure-u-20-24" id="server_line"></div>
				<div class="pure-u-2-24" id="margin"></div>
				
				<a name="lepus"></a>
				<div class="pure-g">
					<div class="pure-u-2-24" id="margin"></div>
					<div class="pure-u-20-24" id="server_row">
						<div id="server_img_cont">
							<h1>Lepus</h1>
							<img class="pure-img" id="server_img" src="img/logo/lepus.png">
						</div>
						<div id="server_desc">
							<h1>lepus.dbs.umt.edu:22</h1>

							<table id="sum-tab">
								<tr><td class="td-label">Access: </td><td>Good lab</td></tr>
								<tr><td class="td-label">Operating System: </td><td>Linux version 4.4.0-109-generic</td></tr>
								<tr><td class="td-label">Processor: </td><td>Intel Xeon Processor E5-2650 @ 2GHz (8 cores, 16 threads)</td></tr>
								<tr><td class="td-label">Memory: </td><td>200GB</td></tr>
								<tr><td class="td-label">Storage:</td>
									<td>
										One 12TB HDD containing several partitions, including the OS</br>
										One 12TB HDD containing one partition</br>
										One 4TB HDD containing one partition</br>
										One 4TB HDD containing one partition</br>
									</td>
								</tr>
							</table>

							<center>
							<table id="vol-tab">
								<thead><th>Partition name</th><th>Path</th><th>Capactity</th></thead>
								<tr><td><em>home</em></td><td>/home</td><td>3.3TB</td></tr>
								<tr><td><em>data</em></td><td>/data</td><td>7.5TB</td></tr>
								<tr><td><em>scratch</em></td><td>/scratch/1</td><td>11TB</td></tr>
								<tr><td><em>scratch2</em></td><td>/scratch/2</td><td>3.7TB</td></tr>
								<tr><td><em>scratch3</em></td><td>/scratch/3</td><td>3.7TB</td></tr>
							</table>
							</center>
						</div>
					</div>
					<div class="pure-u-2-24" id="margin"></div>
				</div>

				<div class="pure-u-24-24" id="server_sep_div"></div>
				<div class="pure-u-2-24" id="margin"></div>
				<div class="pure-u-20-24" id="server_line"></div>
				<div class="pure-u-2-24" id="margin"></div>

				<a name="rattus"></a>	
				<div class="pure-g">
					<div class="pure-u-2-24" id="margin"></div>
					<div class="pure-u-20-24" id="server_row">
						<div id="server_img_cont">
							<h1>Rat</h1>
							<img class="pure-img" id="server_img" src="img/logo/rat.png">
						</div>
						<div id="server_desc">
							<h1>(Coming soon!)</h1>

							<table id="sum-tab">
								<tr><td class="td-label">Access: </td><td>Good lab</td></tr>
								<tr><td class="td-label">Operating System: </td><td></td></tr>
								<tr><td class="td-label">Processor: </td><td></td></tr>
								<tr><td class="td-label">Memory: </td><td></td></tr>
								<tr><td class="td-label">Storage:</td><td>12 HDD x 16TB (192TB) Network attached storage</td>
								</tr>
							</table>

							<!-- <center>
							<table id="vol-tab">
								<thead><th>Partition name</th><th>Path</th><th>Capactity</th></thead>
							</table>
							</center> -->
						</div>
					</div>
					<div class="pure-u-2-24" id="margin"></div>
				</div>

				<div class="pure-u-24-24" id="server_sep_div"></div>
				<div class="pure-u-2-24" id="margin"></div>
				<div class="pure-u-20-24" id="server_line"></div>
				<div class="pure-u-2-24" id="margin"></div>

				<a name="carnation"></a>	
				<div class="pure-g">
					<div class="pure-u-2-24" id="margin"></div>
					<div class="pure-u-20-24" id="server_row">
						<div id="server_img_cont">
							<h1><a href="http://hs.umt.edu/dbs/labs/genomics/bioinformatics/servers.php" target="_blank">Carnation</a></h1>
							<img class="pure-img" id="server_img" src="img/logo/carnation.png">
						</div>
						<div id="server_desc">
							<h1>carnation.dbs.umt.edu:2225</h1>

							<table id="sum-tab">
								<tr><td class="td-label">Access: </td><td><a href="http://hs.umt.edu/dbs/labs/genomics/default.php" target="_blank">Genomics Core Laboratory</a></td></tr>
								<tr><td class="td-label">Operating System: </td><td>Linux version 4.4.0-104-generic</td></tr>
								<tr><td class="td-label">Processor: </td><td>4 x Intel Xeon CPU E7-8860 v3 @ 2.20GHz (64 cores, 128 threads total)</td></tr>
								<tr><td class="td-label">Memory: </td><td>2TB</td></tr>
								<tr><td class="td-label">Storage:</td><td>200TB</td></tr>
								<tr><td class="td-label">Summary:</td><td><a href="http://hs.umt.edu/dbs/labs/genomics/bioinformatics/servers.php" target="_blank">http://hs.umt.edu/dbs/labs/genomics/bioinformatics/servers.php</a></td></tr>
							</table>

						</div>
					</div>
					<div class="pure-u-2-24" id="margin"></div>
				</div>

				<div class="pure-u-24-24" id="server_sep_div"></div>
				<div class="pure-u-2-24" id="margin"></div>
				<div class="pure-u-20-24" id="server_line"></div>
				<div class="pure-u-2-24" id="margin"></div>

				<a name="reincarnation"></a>	
				<div class="pure-g">
					<div class="pure-u-2-24" id="margin"></div>
					<div class="pure-u-20-24" id="server_row">
						<div id="server_img_cont">
							<h1>Reincarnation</h1>
							<img class="pure-img" id="server_img" src="img/logo/reincarnation.png">
						</div>
						<div id="server_desc">
							<h4>Now incorporated into the Griz cluster! See below for stats.</h4>
						</div>
					</div>
					<div class="pure-u-2-24" id="margin"></div>
				</div>


				<div class="pure-u-24-24" id="server_sep_div"></div>
				<div class="pure-u-2-24" id="margin"></div>
				<div class="pure-u-20-24" id="server_line"></div>
				<div class="pure-u-2-24" id="margin"></div>

				<a name="griz"></a>	
				<div class="pure-g">
					<div class="pure-u-2-24" id="margin"></div>
					<div class="pure-u-20-24" id="server_row">
						<div id="server_img_cont">
							<h1><a href="http://docs.gscc.umt.edu/overview/hardware/" target="_blank">Griz</a></h1>
							<img class="pure-img" id="server_img" src="img/logo/griz.png">
						</div>
						<div id="server_desc">
							<h1>griz.gscc.umt.edu</h1>

							<table id="sum-tab">
								<tr><td class="td-label">Access: </td><td>University-wide</td></tr>
								<tr><td class="td-label">Summary:</td><td><a href="http://docs.gscc.umt.edu/overview/hardware/" target="_blank">Griz docs</a></td></tr>
								<tr><td class="td-label">Login info: </td><td>NetID and password</td></tr>
								<tr><td class="td-label">On campus login: </td><td>griz.gscc.umt.edu (head node)</td></tr>
								<tr><td class="td-label">Off campus login: </td><td><strike>login.gscc.umt.edu (login node)</strike> <-- Not yet available. Use VPN and login to head node when off campus.</td></tr>
								<tr><td class="td-label">Operating System: </td><td>CentOS 7.x</td></tr>
							</table>
						</div>
					</div>
					<div class="pure-u-2-24" id="margin"></div>
				</div>

				<div class="pure-g">
					<div class="pure-u-2-24" id="margin"></div>
					<div class="pure-u-20-24" id="server_row">
						<div id="griz_node_desc">

							<h3>We have several classes of compute nodes currently available to us:</h3>

							<table id="sum-tab">
								<tr><td class="td-label">Partition: </td><td>good_lab_cpu</td></tr>
								<tr><td class="td-label"># nodes</td><td>8</td></tr>
								<tr><td class="td-label">Name: </td><td>compute-0-[1-8]</td></tr>
								<tr><td class="td-label">Operating System: </td><td>CentOS Linux release 7.4.1708</td></tr>
								<tr><td class="td-label">Processors: </td>
									<td>
										<b>72 threads: </b>
										<a href="https://ark.intel.com/content/www/us/en/ark/products/120490/intel-xeon-gold-6150-processor-24-75m-cache-2-70-ghz.html" target="_blank">
											Intel(R) Xeon(R) Gold 6150 CPU @ 2.70 GHz</a> (2 CPU x 18 cores per CPU x 2 threads per core)
									</td>
								</tr>
								<tr><td class="td-label">Memory: </td><td>790GB</td></tr>
								<!-- <tr><td class="td-label">Storage:</td><td>200GB</td></tr> -->
							</table>			
							<!-- good_lab_cpu -->

							<table id="sum-tab">
								<tr><td class="td-label">Partition: </td><td>good_lab_large_cpu</td></tr>
								<tr><td class="td-label"># nodes</td><td>??</td></tr>
								<tr><td class="td-label">Name: </td><td>??</td></tr>
								<tr><td class="td-label">Operating System: </td><td>CentOS Linux release 7.4.1708</td></tr>
								<tr><td class="td-label">Processors: </td>
									<td>
										<b>36 threads: </b>
										<a href="https://ark.intel.com/content/www/us/en/ark/products/192443/intel-xeon-gold-6240-processor-24-75m-cache-2-60-ghz.html" target="_blank">
											Intel(R) Xeon(R) Gold 6240 CPU @ 2.60GHz</a> (1 CPU x 8 cores per CPU x 2 threads per core)
									</td>
								</tr>
								<tr><td class="td-label">Memory: </td><td>512GB</td></tr>
								<!-- <tr><td class="td-label">Storage:</td><td>200GB</td></tr> -->
							</table>
							<!-- good_lab_large_cpu -->

							<table id="sum-tab">
								<tr><td class="td-label">Partition: </td><td>good_lab_small_cpu</td></tr>
								<tr><td class="td-label"># nodes</td><td>4</td></tr>
								<tr><td class="td-label">Name: </td><td>compute-0-[9-12]</td></tr>
								<tr><td class="td-label">Operating System: </td><td>CentOS Linux release 7.4.1708</td></tr>
								<tr><td class="td-label">Processors: </td>
									<td>
										<b>32 threads: </b>
										<a href="https://ark.intel.com/content/www/us/en/ark/products/92986/intel-xeon-processor-e5-2620-v4-20m-cache-2-10-ghz.html" target="_blank">
											Intel(R) Xeon(R) CPU E5-2620 v4 @ 2.10GHz</a> (1 CPU x 18 cores per CPU x 2 threads per core)
									</td>
								</tr>
								<tr><td class="td-label">Memory: </td><td>264GB</td></tr>
								<!-- <tr><td class="td-label">Storage:</td><td>200GB</td></tr> -->
							</table>
							<!-- good_lab_small_cpu -->

							<table id="sum-tab">
								<tr><td class="td-label">Partition: </td><td>good_lab_gpu</td></tr>
								<tr><td class="td-label"># nodes</td><td>8</td></tr>
								<tr><td class="td-label">Name: </td><td>compute-1-[5-12]</td></tr>
								<tr><td class="td-label">Operating System: </td><td>CentOS Linux release 7.4.1708</td></tr>
								<tr><td class="td-label">Processors: </td>
									<td>
										<b>36 threads: </b>
										<a href="https://ark.intel.com/content/www/us/en/ark/products/192443/intel-xeon-gold-6240-processor-24-75m-cache-2-60-ghz.html" target="_blank">
											Intel(R) Xeon(R) Gold 6240 CPU @ 2.60GHz</a> (1 CPU x 8 cores per CPU x 2 threads per core)
									</td>
								</tr>
								<tr><td class="td-label">GPU: </td>
									<td>
										<b>4 GPU per node: </b>
										<a href="https://www.techpowerup.com/gpu-specs/geforce-rtx-2080-ti.c3305" target="_blank">
											NVIDIA RTX 2080Ti</a>
									</td>
								</tr>
								<tr><td class="td-label">Memory: </td><td>512GB</td></tr>
								<!-- <tr><td class="td-label">Storage:</td><td>200GB</td></tr> -->
							</table>
							<!-- good_lab_gpu -->

							<table id="sum-tab">
								<tr><td class="td-label">Partition: </td><td>good_lab_reincarnation</td></tr>
								<tr><td class="td-label"># nodes</td><td>1</td></tr>
								<tr><td class="td-label">Name: </td><td>compute-2-1</td></tr>
								<tr><td class="td-label">Operating System: </td><td>??</td></tr>
								<tr><td class="td-label">Processors: </td>
									<td>
										<b>32 threads: </b>
										<a href="" target="_blank">
											</a> (1 CPU x 18 cores per CPU x 2 threads per core)
									</td>
								</tr>
								<tr><td class="td-label">Memory: </td><td>2TB</td></tr>
								<!-- <tr><td class="td-label">Storage:</td><td>200GB</td></tr> -->
							</table>
							<!-- good_lab_small_cpu -->

							<h3>Transferring files to Griz:</h3>

							<p>Typical command line tools like rsync and sftp may be your best option for transferring files to and from Griz:</p>

							<p>For example, the typical rsync command looks like this:</p>

							<code>rsync -azvh [username]@[server address]:[location on remote server] [desired destination on local server]</code>

							<p>As an explicit example, lets say I wanted to transfer a file called "data" in my home directory on Musculus to my home directory on Griz:</p>

							<code>rsync -azvh gregg_thomas@musculus.dbs.umt.edu:/home/gregg_thomas/data/ /home/gt156213e/.</code>

							<p>The . at the end indicates I want the same file/directory name in th destination. Alternateively, if I just want to transfer to my current working directory, I can just put a . as the destination:</p>

							<code>rsync -azvh gregg_thomas@musculus.dbs.umt.edu:/home/gregg_thomas/data/ .</code>

							<p>For Carnation, a port needs to be specified as follows:</p>

							<code>rsync -avzh -e 'ssh -p 2225' gregg_thomas@carnation.dbs.umt.edu:/home/gregg_thomas/data/ .</code>


							<h3>Storing files on Griz</h3>

							<p>Currently, the main storage space on the Griz cluster is the beegfs file system. This system has 800TB of storage and will likely turn into scratch space in the future.
								In the meantime, we have a pretty free reign here, so go ahead and make a folder there and store stuff.
							</p>

							<center><h4>Important! Make sure this isn't the only place you are storing your data! Best practice is to have at least 2 backups.</h4></center>

							<p>Navigate to /mnt/beegfs/:</p>

							<code>cd /mnt/beegfs/</code>

							<p>Create a directory with your username (NetID):</p>

							<code>mkdir gt156213e</code>

							<p>And enjoy the space!</p>


							<h3>Installing software</h3>

							<p>
								I think this is still being figured out. Likely, the recommended method will be to have a local 
								<a href="https://www.anaconda.com/" target="_blank">Anaconda</a> installation, from which you can install 
								multiple versions of bioinformatic software from <a href="https://anaconda.org/bioconda" target="_blank">bioconda</a>.
							</p>


							<h4>Installing Anaconda</h4>

							<p>
								To install <a href="https://www.anaconda.com/" target="_blank">Anaconda</a>, 
								download the latest version of the installer here <b>(MAKE SURE LINUX IS SELECTED)</b>: 
								<a href="https://www.anaconda.com/distribution/#download-section" target="_blank">https://www.anaconda.com/distribution/#download-section</a>
							</p>

							<p>
								Previous Anaconda versions can be found in their <a href="https://repo.anaconda.com/archive/" target="_blank">archive</a>.
							</p>

							<p>
								The official docs for installing can be found here: <a href="https://docs.anaconda.com/anaconda/install/linux/" target="blank">https://docs.anaconda.com/anaconda/install/linux/</a>
							</p>

							<p>
								Briefly, once the install file is in the location you wish to install Anaconda, you will simply type:
							</p>

							<code>bash [install file].sh</code>

							<p>
								Follow the prompts to complete installation.
							</p>

							<h4>Anaconda environments</h4>

							<p>
								After installing Anaconda you will have to create and manage Anaconda envrionments. Envrionments can be powerful because they let you easily install
								and manage software locally. For instance, you could set up a main environment that is kept up to date with the latest versions
								of critical software, such as samtools, GATK, IQ-Tree, etc. But if you have a specific workflow that is dependent on an old version
								of, say, GATK, you could set up another enviornment with that version.
							</p>

							<p>
								Here are the official docs for managing conda enviornments: 
								<a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html" target="_blank">https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html</a>
							</p>

							<p>Below I will run through some of the basics.</p>

							<p>First, everytime you login, you will have to start Anaconda:</p>

							<code>source ~/anaconda3/bin/activate</code>

							<p>Your command prompt should now have the <code>(base)</code> prefix, indicating you are in the base Anaconda environment.
								Next you will need to create a new environment. You should name your environment something descriptive like "gatk3-env" or
								"biomain". For this example, I will call my main environment "biotools". To create the "biotools" environment type:
							</p>

							<code>conda create --name biotools</code>
								
							<p>
								Some information will print to the screen, and you will be asked to confirm creation of the environment. Confirm and then your environment
								should be created! The command prompt prefix should now be the name of your environment (<code>biotools</code> in this example).
							</p>							
							
							<p>
								To install software in this environment, search for the package you want on <a href="https://anaconda.org/bioconda" target="_blank">bioconda</a> 
								and run the appropriate command. For example, to install samtools:
							</p>

							<code>conda install -c bioconda samtools</code>

							<p>Install as much software as you like! It should all be self-contained within this environment.</p>

							<p>
								When you are in an environment and wish to exit it, simply type:
							</p>

							<code>conda deactivate</code>

							<p>
								If you are in an environment, this will take you to the (base) Anaconda state. If you are in (base), it will exit Anaconda.
							</p>	

							<p>
								To start a particular enviornment, be sure Anaconda is running ((base) is in your prompt), and run:
							</p>

							<code>conda activate [env name]</code>

							<p>
								The command prompt prefix should now be the name of your environment and all the software installed in that environment should
								be available to you.
							</p>

							<p>
								I recommend adding the following commands to your <code>.bash_profile</code> file so they are run automatically everytime
								you log in.
							</p>

							<code>source ~/anaconda3/bin/activate</code>
							<code>conda activate [env name]</code>

							<h4>The module system and server-wide installs</h4>

							<p>
								There <em>is</em> a module system on Griz, but it seems like this won't be used. If you request something to be installed rather than 
								installing it yourself, instead of server-wide installs, Griz is likely to follow the Carnation protocol, where you email 
								the admins about software you need installed, and they will	set up a separate conda environment specifically for it. 
								This is less than optimal for our purposes.
							</p>

							<h4>Building from source or installing binaries yourself</h4>

							<p>
								It is of course still possible to install software yourself locally if you wish to forego Anaconda, but there's no way to
								guarantee that all dependencies will be installed for a given piece of software.
							</p>

							<h4>R</h4>

							<p>
								Still working this out. <!-- source /share/apps/R-3.6.1//runNewR.sh -->
							</p>

							<h3>Job Submission</h3>

						</div>
					</div>
					<div class="pure-u-2-24" id="margin"></div>
				</div>

			</div>
		</div>

		<div class="pure-u-24-24" id="sep_div"></div>

        <div class="pure-g" id="footer">
		<div class="pure-u-1">
			<div id="footer_text">
				<center>Site designed and maintained by <a href="https://gwct.github.io" target="_blank">Gregg Thomas</a> | 
					<!-- email: <img class="pure_img" src="img/contact/cont-footer.png"> |  -->
					<a href="https://purecss.io/" target="_blank">Pure CSS</a> | Page built: 02/11/2020 20:36:34 MST</center>
			</div>
		</div>
	</div>
</body>
